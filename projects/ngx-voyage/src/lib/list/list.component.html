<p-table
  [value]="filteredFiles()"
  [scrollable]="true"
  scrollHeight="flex"
  stripedRows
  selectionMode="single"
  [(selection)]="selectedFile"
  [tableStyle]="{ 'table-layout': 'fixed' }"
>
  <ng-template #header>
    <tr>
      <th pSortableColumn="name" class="max-w-0 w-3/5"
        >Name <p-sortIcon field="name"
      /></th>
      <th pSortableColumn="size" class="w-1/5"
        >Size <p-sortIcon field="size"
      /></th>
      <th pSortableColumn="modifiedDate" class="w-3/10"
        >Date <p-sortIcon field="modifiedDate"
      /></th>
    </tr>
  </ng-template>
  <ng-template #body let-file>
    <tr
      class="cursor-pointer"
      (contextmenu)="onContextMenu($event, file)"
      [pSelectableRow]="file"
      (dblclick)="openFileOrFolder(file)"
      (click)="onRowClick($event, file)"
    >
      <td>
        <div
          class="flex flex-row gap-3 items-center"
          [ngClass]="{ 'text-gray-500': file.name.startsWith('.') }"
        >
          <div class="w-6 text-center">
            @if (file.isDirectory) {
              <i class="fa-solid fa-folder text-2xl"></i>
            } @else {
              <i class="fa-regular text-2xl {{ getFileIcon(file) }}"></i>
            }
          </div>
          <span class="truncate">{{ file.name }}</span>
        </div>
      </td>
      <td
        class="truncate"
        [ngClass]="{ 'text-gray-500': file.name.startsWith('.') }"
      >
        {{ prettyBytes(file.size) }}
      </td>
      <td>
        <div class="truncate">
          {{ formatDate(file) }}
        </div>
      </td>
    </tr>
  </ng-template>
</p-table>

<p-contextmenu #cm [model]="menuItems"></p-contextmenu>
